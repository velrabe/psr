# Утилиты для парсинга каталога

Директория содержит скрипты для автоматического парсинга данных каталога с сайта stone-technology.info.

Доступны два варианта:
- **Python** (`parse_catalog.py`) - рекомендуется
- **Node.js** (`parse_catalog.js`) - альтернативный вариант

## Python версия

### Установка зависимостей

```bash
pip install -r requirements.txt
```

Или установите вручную:

```bash
pip install requests beautifulsoup4 lxml
```

### Использование

```bash
python parse_catalog.py
```

## Node.js версия

### Установка зависимостей

```bash
npm install
```

Или установите вручную:

```bash
npm install axios cheerio
```

### Использование

```bash
node parse_catalog.js
```

или

```bash
npm run parse
```

## Использование (общее)

Скрипт:
1. Загружает главную страницу сайта
2. Находит все категории товаров
3. Для каждой категории парсит список товаров
4. Для каждого товара загружает детальную страницу и извлекает:
   - Название
   - Описание
   - Изображение
   - Характеристики
   - Область применения
   - Расход материала
5. Сохраняет результат в `../catalog.json`

### Настройка

Вы можете изменить параметры в начале файла `parse_catalog.py`:

- `BASE_URL` - базовый URL сайта для парсинга
- `OUTPUT_FILE` - путь к выходному файлу JSON
- `HEADERS` - заголовки HTTP запросов

### Обработка ошибок

Скрипт включает обработку ошибок и продолжит работу даже если некоторые товары не удалось распарсить. Все ошибки выводятся в консоль.

### Задержки

Скрипт включает задержки между запросами:
- 0.5 секунды между товарами
- 1 секунда между категориями

Это необходимо, чтобы не перегружать сервер. При необходимости можно изменить эти значения.

## Структура выходного файла

Результат сохраняется в формате JSON, совместимом с `catalog.json`:

```json
{
  "categories": [
    {
      "id": "category-id",
      "name": "Название категории",
      "description": "Описание категории",
      "products": [
        {
          "id": "product-id",
          "name": "Название товара",
          "description": "Описание товара",
          "image": "URL изображения",
          "specifications": ["Характеристика 1", "Характеристика 2"],
          "application": "Область применения",
          "consumption": "Расход материала"
        }
      ]
    }
  ]
}
```

## Примечания

- Скрипт использует различные селекторы для поиска элементов, так как структура сайта может отличаться
- Если какие-то элементы не найдены, используются значения по умолчанию
- Изображения сохраняются как URL. Если нужно скачать изображения локально, потребуется дополнительный скрипт
- Скрипт может потребовать доработки в зависимости от реальной структуры сайта stone-technology.info

## Устранение проблем

### Ошибка "ModuleNotFoundError"

Убедитесь, что установлены все зависимости:
```bash
pip install -r requirements.txt
```

### Товары не парсятся

1. Проверьте, что сайт доступен
2. Возможно, изменилась структура HTML - проверьте селекторы в коде
3. Сайт может блокировать запросы - попробуйте изменить User-Agent в HEADERS

### Пустые результаты

Если скрипт не находит товары, возможно:
- Изменилась структура меню/каталога на сайте
- Требуется авторизация
- Сайт использует JavaScript для загрузки контента (тогда нужен Selenium или Puppeteer)

## Дополнительные возможности

Для более сложных случаев (JavaScript-сайты) можно использовать:
- Selenium (Python)
- Puppeteer (Node.js)
- Playwright (Python/Node.js)

